<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="minaraad">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

    <body>
    <div metal:fill-slot="prefs_configlet_main">

        <h1 i18n:translate="heading_subscriptions_setup">Subscriptions Settings</h1>

        <a class="link-parent"
           tal:attributes="href string: $portal_url/plone_memberprefs_panel"
           i18n:translate="label_up_to_my_preferences">
            Up to My Preferences
        </a>

        <p class="documentDescription" 
           i18n:translate="description_subscriptions_setup">
            Subscriptions settings for this member.
        </p>
        
        <form action=""
              name="search"
              method="post"
              tal:attributes="action string:${request/ACTUAL_URL}">

            <fieldset>
                <legend i18n:translate="legend_current_subscriptions_details">Subscriptions</legend>
                <table>
                    <tr>
                        <th style="padding:0px 5px 0px 8px"
                            i18n:translate="title_subscription">Subscriptions</th>
                        <th style="padding:0px 5px 0px 5px"
                            i18n:translate="title_email">By E-mail</th>
                        <th style="padding:0px 5px 0px 5px"
                            i18n:translate="title_post">By Mail</th>
                    </tr>
                    <tr class="field" 
                        tal:repeat="subscription view/subscriptions">
                        <td>
                            <span tal:content="subscription/category|nothing"
                                i18n:translate="" 
                                tal:omit-tag="" /><span tal:condition="subscription/category|nothing">:</span>
                            <span tal:content="string:${subscription/Title}"
                                i18n:translate="" 
                                tal:omit-tag="" />
                        </td>
                        <td style="text-align:center">
                           <input type="checkbox"
                               class="noborder"
                               tal:condition="subscription/can_email"
                               tal:attributes="tabindex tabindex/next;
                                               id string:email_${subscription/id};
                                               name string:email_${subscription/id};
                                               value string:email_${subscription/id};
                                               checked subscription/subscribed_email" /> 
                        </td>
                        <td style="text-align:center">
                           <input type="checkbox"
                               class="noborder"
                               tal:condition="subscription/can_post"
                               tal:attributes="tabindex tabindex/next;
                                               id string:post_${subscription/id};
                                               name string:post_${subscription/id};
                                               value string:post_${subscription/id};
                                               checked subscription/subscribed_post" /> 
                        </td>
                    </tr>
                </table>
                <div class="formControls">
                    <input class="context"
                           type="submit"
                           name="form.button.Save"
                           value="Save"
                           i18n:attributes="value label_save;"
                           tal:attributes="tabindex tabindex/next;" />
                </div>
            </fieldset>
        </form>
    </div>
    </body>
</html>
