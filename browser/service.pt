<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="minaraad">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main">

    <form action=""
          name="search"
          method="post"
          tal:attributes="action string:${request/ACTUAL_URL}">
      
    <h1>Minaraad Service</h1>

    <a href=""
       class="link-parent"
       tal:attributes="href string: $portal_url/plone_control_panel"
       i18n:translate="label_up_to_plone_setup">
        Up to Site Setup
    </a>

    <div class="portalMessage"
        tal:condition="view/members_deleted"
        tal:content="view/members_deleted" />

    <tal:double_emails
        condition="view/double_emails">
      <h2>Er zijn meerdere gebruikers gevonden per e-mailadres.</h2>
      <dl>
        <tal:item repeat="item view/double_emails">
          <dt tal:content="python:item[0]" />
          <dd tal:content="python:item[1]" />
        </tal:item>        
      </dl>
    </tal:double_emails>

    <tal:changed_members
        condition="view/changed_members_called">
      <tal:changes condition="view/changed_members">
      <h2>Deze gebruikers hebben gegevens gewijzigd:</h2>
      <table id="minaraad_changed_members_table">
        <tr>
          <th>Wijziging</th>
          <th>Naam gebruiker</th>
        </tr>
        <tr tal:repeat="item view/changed_members">
          <td tal:content="item/modified" />
          <td>
            <a tal:attributes="href item/url"
               tal:content="item/fullname" />
          </td>
        </tr>        
      </table>
      </tal:changes>
      <tal:nochanges condition="not:view/changed_members">
        <h2>Er zijn geen gewijzigde gebruikers.</h2>
        <p></p>
      </tal:nochanges>
      <div class="formControls"
           tal:condition="view/changed_by_date">
        <input class="context"
               type="submit"
               name="form.button.ShowAllChangedMembers"
               value="Toon alle ooit gewijzigde gebruikers"
               tal:attributes="tabindex tabindex/next;" />
      </div>
    </tal:changed_members>

    <hr />

      <div class="formControls">
        <input class="context"
               type="submit"
               name="form.button.DeleteMembers"
               value="Verwijder gebruikers zonder emailadres"
               tal:attributes="tabindex tabindex/next;" />
      </div>

      <div class="formControls">
        <input class="context"
               type="submit"
               name="form.button.FindDoubleEmails"
               value="Vind emailadressen met meerdere gebruikers"
               tal:attributes="tabindex tabindex/next;" />
      </div>

      <div class="formControls">
        <input class="context"
               type="submit"
               name="form.button.ShowChangedMembers"
               value="Toon gebruikers met wijzigingen in de laatste maand"
               tal:attributes="tabindex tabindex/next;" />
      </div>    
    </form>

</div>
</body>
</html>
