<metal:page define-macro="master">
  <tal:doctype tal:replace="structure string:&lt;!DOCTYPE html PUBLIC
                            &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
                            &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" />

  <html xmlns="http://www.w3.org/1999/xhtml"
        tal:define="portal_state context/@@plone_portal_state;
                    context_state context/@@plone_context_state;
                    plone_view context/@@plone;
                    lang portal_state/language;
                    view nocall:view | nocall: plone_view;
                    dummy python: plone_view.mark_view(view);
                    portal_url portal_state/portal_url;
                    checkPermission nocall: context/portal_membership/checkPermission;
                    site_properties context/portal_properties/site_properties;
                    ajax_load request/ajax_load | nothing;
                    ajax_include_head request/ajax_include_head | nothing"
        tal:attributes="lang lang;">

    <metal:cache use-macro="context/global_cache_settings/macros/cacheheaders">
      Get the global cache headers located in global_cache_settings.
    </metal:cache>

    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

      <tal:comment replace="nothing">
        Forces IE8+ into newest rendering engine even if on an intranet. This has to be defined before any script/style tags.
      </tal:comment>
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />

      <metal:baseslot define-slot="base">
        <base tal:attributes="href plone_view/renderBase" /><!--[if lt IE 7]></base><![endif]-->
      </metal:baseslot>

      <tal:notajax tal:condition="python:not ajax_load or ajax_include_head">
        <div tal:replace="structure provider:plone.htmlhead" />
        <link tal:replace="structure provider:plone.htmlhead.links" />

        <tal:comment replace="nothing">
          Various slots where you can insert elements in the header from a template.
        </tal:comment>
        <metal:topslot define-slot="top_slot" />
        <metal:headslot define-slot="head_slot" />
        <metal:styleslot define-slot="style_slot" />
        <metal:javascriptslot define-slot="javascript_head_slot" />

        <meta name="viewport" content="width=device-width; initial-scale=0.6666; maximum-scale=1.0; minimum-scale=0.6666" />
        <meta name="generator" content="Plone - http://plone.org" />
      </tal:notajax>

    <script type="text/javascript">
      (function($) {
        function show_sub_nav() {
          $(this).addClass('hovered');
        }

        function hide_sub_nav() {
          $(this).removeClass('hovered');
        }

        $(document).ready(function() {
          $('#portal-tabs-nav > li').mouseenter(show_sub_nav);
          $('#portal-tabs-nav > li').mouseleave(hide_sub_nav);
        });
      })(jQuery)
    </script>
    </head>

    <body tal:define="isRTL portal_state/is_rtl;
                      sl python:plone_view.have_portlets('plone.leftcolumn', view);
                      sr python:plone_view.have_portlets('plone.rightcolumn', view);
                      body_class python:plone_view.bodyClass(template, view);
                      sunburst_view python:context.restrictedTraverse('@@sunburstview')"
          tal:attributes="class body_class;
                          dir python:isRTL and 'rtl' or 'ltr'">

      <div id="visual-portal-wrapper">

        <div id="portal-top"
             class="row"
             i18n:domain="plone"
             tal:condition="not:ajax_load">
            <div class="portal-header-mina"
                 tal:define="abs_url python:context.absolute_url;
                             urlheader string:$abs_url/header.jpg"
                 tal:attributes="style string:background:url($urlheader) no-repeat right;">
              <div class="header-borderbottom " />
            </div>
        </div>

        <div id="portal-columns" class="row">
          <tal:notajax tal:condition="not:ajax_load">
            <div id="portal-column-menu"
                 class="column">
              <div metal:use-macro="here/global_sections/macros/portal_tabs">
                The global sections tabs. (Welcome, News etc)
              </div>

              <div class="mina_portlets_spacing">
                <metal:block metal:use-macro="here/portlet_login/macros/portlet" />
                <metal:block metal:use-macro="here/portlet_personalbar/macros/portlet" />
              </div>
            </div>
          </tal:notajax>


          <div id="portal-column-content"
               class="column">
            <div id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" tal:condition="not:ajax_load" />

            <metal:block define-slot="content">
              <div metal:define-macro="content"
                   tal:define="show_border context/@@plone/showEditableBorder; show_border python:show_border and not ajax_load"
                   tal:attributes="class python:show_border and 'documentEditable' or ''">

                <div id="edit-bar"
                     tal:condition="show_border"
                     tal:content="structure provider:plone.contentviews" />

                <div metal:use-macro="context/global_statusmessage/macros/portal_message">
                  Status message
                </div>

                <metal:slot define-slot="body">
                  <div id="content">

                    <metal:header define-slot="header" tal:content="nothing">
                      Visual Header
                    </metal:header>

                    <metal:bodytext define-slot="main">

                      <div id="viewlet-above-content-title" tal:content="structure provider:plone.abovecontenttitle" tal:condition="not:ajax_load" />
                      <metal:title define-slot="content-title">
                        <metal:comment tal:content="nothing">
                          If you write a custom title always use
                          <h1 class="documentFirstHeading"></h1> for it
                        </metal:comment>
                        <h1 metal:use-macro="context/kss_generic_macros/macros/generic_title_view">
                          Generic KSS Title. Is rendered with class="documentFirstHeading".
                        </h1>
                      </metal:title>
                      <div id="viewlet-below-content-title" tal:content="structure provider:plone.belowcontenttitle" tal:condition="not:ajax_load" />

                      <metal:description define-slot="content-description">
                        <metal:comment tal:content="nothing">
                          If you write a custom description always use
                          <div class="documentDescription"></div> for it
                        </metal:comment>
                        <div metal:use-macro="context/kss_generic_macros/macros/generic_description_view">
                          Generic KSS Description. Is rendered with class="documentDescription".
                        </div>
                      </metal:description>

                      <div id="viewlet-above-content-body" tal:content="structure provider:plone.abovecontentbody" tal:condition="not:ajax_load" />
                      <div id="content-core">
                        <metal:text define-slot="content-core" tal:content="nothing">
                          Page body text
                        </metal:text>
                      </div>
                      <div id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" tal:condition="not:ajax_load" />

                    </metal:bodytext>
                  </div>
                </metal:slot>

                <metal:sub define-slot="sub" tal:content="nothing">
                  This slot is here for backwards compatibility only.
                  Don't use it in your custom templates.
                </metal:sub>
              </div>
            </metal:block>

            <div id="viewlet-below-content"
                 tal:content="structure provider:plone.belowcontent"
                 tal:condition="not:ajax_load" />
          </div>

          <tal:notajax tal:condition="not:ajax_load">
            <div id="portal-column-two"
                 class="column"
                 metal:define-slot="column_two_slot">
              <div metal:use-macro="here/global_searchbox/macros/quick_search"
                   tal:omit-tag="">
                The quicksearch box, normally placed at the top right
              </div>

               <tal:linkedin
                   define="pcs context/@@plone_context_state"
                   tal:on-error="string:"
                   condition="python:pcs.is_portal_root() and pcs.is_view_template() and context.show_linkedin">
                 <script src="http://www.linkedin.com/companyInsider?script&useBorder=yes"
                         type="text/javascript"></script>
                 <div id="linkedin-company-insider">
                   <tal:comment replace="nothing">
                     This LinkedIn box needs some javascript in the
                     head.  The next ids and tags must not be changed.
                   </tal:comment>
                   <span id="minaraad"></span>
                   <script type="text/javascript">
                     new LinkedIn.CompanyInsiderPopup("minaraad","Minaraad");
                   </script>
                 </div>
               </tal:linkedin>

              <metal:block metal:use-macro="here/portlet_recent/macros/portlet" />
              <metal:portlets define-slot="portlets_two_slot">
                <tal:block replace="structure provider:plone.rightcolumn" />
              </metal:portlets>
            </div>
          </tal:notajax>
          <div style="clear: both"></div>
        </div>

        <div metal:use-macro="here/global_siteactions/macros/site_actions"
             tal:omit-tag="">
          Site-wide actions (Contact, Sitemap, Help, Style Switcher etc)
        </div>



        <div i18n:domain="plone" tal:condition="not:ajax_load" class="row">
          <metal:colophon use-macro="here/colophon/macros/colophon">
          </metal:colophon>
        </div>
      </div>
    </body>
  </html>
</metal:page>
