<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

  <head>
    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1)" />
  </head>
  <body>
    <div metal:fill-slot="main"
         tal:define="errors options/state/getErrors;"
         tal:omit-tag="">

      <h1 i18n:translate="heading_registration_form">Registration Form</h1>

      <form action=""
            method="post"
            class="enableAutoFocus enableUnloadProtection"
            id="joinForm"
            tal:define="allowEnterPassword not:portal/validate_email|nothing;"
            tal:attributes="action template_id" >

        <fieldset>
          <legend i18n:translate="legend_personal_details">Personal Details</legend>
          <input type="hidden" name="came_from" value=""
                 tal:condition="request/came_from|nothing"
                 tal:attributes="value request/came_from" />
          <input type="hidden" name="last_visit:date" value="ZopeTime"
                 tal:attributes="value here/ZopeTime" />
          <input type="hidden" name="prev_visit:date" value="ZopeTime"
                 tal:attributes="value here/ZopeTime" />
          <input type="hidden" name="came_from_prefs"
                 tal:attributes="value request/came_from_prefs|nothing" />

          <div class="joinRow">
            <!-- *** gender *** -->
            <div class="field"
                 tal:define="error errors/gender | nothing;
                             genders python:context.portal_memberdata.genders;
                             tabindex tabindex/next;">

              <label i18n:domain="minaraad"
                     for="gender"
                     i18n:translate="label_gender">Gender</label>

              <select name="gender" id="gender">
                <tal:block tal:repeat="option genders">
                  <option tal:attributes="value option;"
                          tal:content="option" />
                </tal:block>
              </select>
            </div>
          </div>
          <div class="joinRow">
          <!--*** firstname *** -->
            <div class="row"
                 tal:define="error errors/firstname| nothing;
                             firstname request/firstname | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="firstname">
                <span class="fieldRequired"
                      title="Required"
                      i18n:attributes="title title_required;"
                      i18n:translate="label_required">(Required)</span>

                <span i18n:translate="label_firstname">First name</span>
              </label>

              <div tal:content="error">Validation error output</div>

              <input type="text"
                     name="firstname"
                     id="firstname"
                     size="30"
                     value="firstname"
                     tal:attributes="value firstname;
                                     tabindex tabindex/next;" />
            </div>

            <!--*** lastname *** -->
            <div class="row"
                 tal:define="error errors/fullname| nothing;
                             fullname request/fullname | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="fullname">
               <span class="fieldRequired"
                     title="Required"
                     i18n:attributes="title title_required;"
                     i18n:translate="label_required">(Required)</span>

                <span i18n:translate="label_lastname">Last name</span>
              </label>
              <div tal:content="error">Validation error output</div>

              <input type="text"
                     name="fullname"
                     id="fullname"
                     size="30"
                     value="fullname"
                     tal:attributes="value fullname;
                                     tabindex tabindex/next;" />
            </div>
          </div>
          <div class="joinRow">
            <!--*** company *** -->
            <div class="row"
                 tal:define="error errors/company| nothing;
                             company request/company | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="company"
                     i18n:translate="label_company">Company</label>
              <div tal:content="error">Validation error output</div>

              <input type="text"
                     name="company"
                     id="company"
                     size="30"
                     value="company"
                     tal:attributes="value company;
                                     tabindex tabindex/next;" />
            </div>

            <!--*** jobtitle *** -->
            <div class="row"
                 tal:define="error errors/jobtitle| nothing;
                             jobtitle request/jobtitle | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="jobtitle"
                     i18n:translate="label_jobtitle">Job title</label>
              <div tal:content="error">Validation error output</div>

              <input type="text"
                     name="jobtitle"
                     id="jobtitle"
                     size="30"
                     value="jobtitle"
                     tal:attributes="value jobtitle;
                                     tabindex tabindex/next;" />
            </div>
          </div>
          <div class="joinRow">
            <!--*** street *** -->
            <div class="row"
                 tal:define="error errors/street | nothing;
                             street request/street | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="street">
                     <span class="fieldRequired"
                             title="Required"
                             i18n:attributes="title title_required;"
                             i18n:translate="label_required">(Required)</span>
                <span i18n:translate="label_street">Street</span>

              </label>
              <div tal:content="error">Validation error output</div>
              <input type="text"
                     name="street"
                     id="street"
                     size="30"
                     value="street"
                     tal:attributes="value street;
                                     tabindex tabindex/next;" />
            </div>

            <!--*** housenumber *** -->
            <div class="row"
                 tal:define="error errors/housenumber | nothing;
                             housenumber request/housenumber | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="housenumber">
                       <span class="fieldRequired"
                               title="Required"
                               i18n:attributes="title title_required;"
                               i18n:translate="label_required">(Required)</span>
                <span i18n:translate="label_housenumber">House number</span>

              </label>

              <div tal:content="error">Validation error output</div>
              <input type="text"
                     name="housenumber"
                     id="housenumber"
                     size="10"
                     value="housenumber"
                     tal:attributes="value housenumber;
                                     tabindex tabindex/next;" />
            </div>

            <!--*** bus *** -->
            <div class="row"
                 tal:define="error errors/bus | nothing;
                             bus request/bus | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="bus"
                     i18n:translate="label_bus">Bus</label>

              <div tal:content="error">Validation error output</div>
              <input type="text"
                     name="bus"
                     id="bus"
                     size="10"
                     value="bus"
                     tal:attributes="value bus;
                                     tabindex tabindex/next;" />
            </div>
          </div>
          <div class="joinRow">
            <!--*** zipcode *** -->
            <div class="row"
                 tal:define="error errors/zipcode | nothing;
                             zipcode request/zipcode | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="zipcode">
                  <span class="fieldRequired"
                         title="Required"
                         i18n:attributes="title title_required;"
                         i18n:translate="label_required">(Required)</span>

                <span i18n:translate="label_zipcode">Zipcode</span>
              </label>
              <div tal:content="error">Validation error output</div>
              <input type="text"
                     name="zipcode"
                     id="zipcode"
                     size="30"
                     value="zipcode"
                     tal:attributes="value zipcode;
                                     tabindex tabindex/next;" />
            </div>

          <!--*** city *** -->
          <div class="row"
               tal:define="error errors/city | nothing;
                           city request/city | nothing;"
               tal:attributes="class python:test(error, 'field error', 'field')">

            <label i18n:domain="minaraad"
                   for="city">
                    <span class="fieldRequired"
                           title="Required"
                           i18n:attributes="title title_required;"
                           i18n:translate="label_required">(Required)</span>
              <span i18n:translate="label_city">City</span>
            </label>

            <div tal:content="error">Validation error output</div>
            <input type="text"
                   name="city"
                   id="city"
                   size="30"
                   value="city"
                   tal:attributes="value city;
                                   tabindex tabindex/next;" />
          </div>
         </div>
         <div class="joinRow">
            <!--*** country *** -->
            <div class="field"
                 tal:define="error errors/country | nothing;
                             countries python:context.portal_memberdata.select_country;">

              <label i18n:domain="minaraad"
                     for="country"
                     i18n:translate="label_country">Country</label>

              <select name="country"
                      id="country"
                      onchange="showOtherCountry(this)"
                      tal:attributes="tabindex tabindex/next">
                <tal:block tal:repeat="option countries">
                  <option tal:attributes="value option;"
                          tal:content="option" />
                </tal:block>
              </select>
              <div class="row"
                   id="othercountry"
                   tal:define="error errors/city | nothing;
                               other_country request/other_country | nothing;
                               displayother python:[option for option in countries if option =='Ander land'];"
                   tal:attributes="style python:test(displayother, 'display:none', '');">
                <br />
                <label i18n:domain="minaraad"
                       for="other_country"
                       i18n:translate="label_other_country">Other country</label>
                <div tal:content="error">Validation error output</div>

                <input type="text"
                       name="other_country"
                       id="other_country"
                       size="30"
                       value="other_country"
                       tal:attributes="value other_country;
                                       tabindex tabindex/next;" />
              </div>
            </div>

            <!--*** phonenumber *** -->
            <div class="row"
                 tal:define="error errors/phonenumber | nothing;
                             phonenumber request/phonenumber | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label i18n:domain="minaraad"
                     for="phonenumber"
                     i18n:translate="label_phonenumber">Phone number</label>
              <div tal:content="error">Validation error output</div>

              <input type="text"
                     name="phonenumber"
                     id="phonenumber"
                     size="30"
                     value="phonenumber"
                     tal:attributes="value phonenumber;
                                     tabindex tabindex/next;" />
            </div>
          </div>
          <div class="joinRow joinEmail">
            <!-- *** emailadres ** -->
            <div class="field"
                 tal:define="error errors/email | errors/username | nothing;
                             email request/email | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label for="email">
                <span i18n:translate="label_email">E-mail</span>
                <span class="fieldRequired"
                      title="Required"
                      i18n:attributes="title title_required;"
                      i18n:translate="label_required">(Required)</span>
              </label>

              <div class="formHelp"
                   i18n:domain="minaraad"
                   i18n:translate="help_email_creation_mina">
                Enter an email address. You will use this to login to
                the site. This is also necessary in case the password is
                lost. We respect your privacy, and will not give the
                address away to any third parties or expose it anywhere.
              </div>

              <div tal:content="error">Validation error output</div>

              <input type="text"
                     name="email"
                     id="email"
                     size="30"
                     tal:attributes="value email;
                                     tabindex tabindex/next;" />
            </div>
          </div>
          <div class="joinRow">
            <!-- *** password *** -->
            <div class="field"
                 tal:condition="allowEnterPassword"
                 tal:define="error errors/password | nothing;
                             password request/password | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">

              <label for="password">
                <span i18n:translate="label_password">Password</span>
                <span class="fieldRequired"
                       title="Required"></span>
              </label>

              <div class="formHelp" i18n:translate="help_password_creation">
                Minimum 5 characters.
              </div>

              <div tal:content="error">Validation error output</div>

              <input type="password"
                     name="password"
                     id="password"
                     size="10"
                     value=""
                     tal:attributes="tabindex tabindex/next;" />
            </div>

            <div class="field"
                 tal:condition="allowEnterPassword"
                 tal:define="error errors/password_confirm | nothing;
                             password_confirm request/password_confirm | nothing;"
                 tal:attributes="class python:test(error, 'field error', 'field')">


              <label for="password_confirm">
                <span class="fieldRequired"
                      title="Required"></span>
                <span i18n:translate="label_confirm_password">Confirm password</span>
              </label>

              <div class="formHelp"
                   i18n:translate="help_confirm_password">
                Re-enter the password. Make sure the passwords are identical.
              </div>

              <div tal:content="error">Validation error output</div>

              <input type="password"
                     name="password_confirm"
                     id="password_confirm"
                     size="10"
                     value=""
                     tal:attributes="tabindex tabindex/next;" />
            </div>

            <div class="field"
                 tal:condition="not:allowEnterPassword">

              <div class="formHelp"
                   i18n:domain="minaraad"
                   i18n:translate="label_password_will_be_mailed_mina">
                A password will be generated and
                e-mailed to you to complete the registration process.
              </div>
            </div>
          </div>
          <div class="joinRow joinCaptcha">
            <div class="field">
              <label
                  i18n:domain="minaraad"
                  i18n:translate="label_captcha">
                To block spammers, please solve this "captcha":
              </label>
              <tal:block tal:replace="structure context/@@captcha/image_tag"/>
            </div>
          </div>
          <div class="joinRow">
            <div class="formControls">
              <input class="context"
                     type="submit"
                     name="form.button.Register"
                     value="Register"
                     i18n:attributes="value label_register;"
                     tal:attributes="tabindex tabindex/next;" />
            </div>
          </div>
        </fieldset>

        <input type="hidden" name="form.submitted" value="1" />
        <input tal:replace="structure context/@@authenticator/authenticator" />
      </form>
    </div>
  </body>
</html>
