<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      i18n:domain="minaraad">
    <metal:block use-macro="context/global_defines/macros/defines" />
    
    <body>
    <metal:block metal:define-macro="body"
                 tal:define="daterequired python:context.getStartdate() != None and context.getEnddate() != None;
                             current_path python:'/'.join(context.aq_parent.getPhysicalPath());
                             agendaItems python:context.portal_catalog.searchResults(portal_type='AgendaItem',
                                                                                    path=current_path,
                                                                                    sort_on='Date',
                                                                                    sort_order='reverse',
                                                                                    review_state='published');">
        <metal:block metal:define-macro="folderlisting" />
        
        <div class="hearingsubheader">
            <span tal:replace="context/getSubheader" />
            <span tal:condition="python:context.getMot() == True"
                  tal:omit-tag="">
                (MOT)
            </span>
        </div>
         
         <div class="hearingsubheader2"
              i18n:translate="Goal:">
            Goal:
         </div>
         
         <div tal:content="context/getGoal" />
         
         <div class="hearingsubheader2">
            <span i18n:translate="Location:"
                  tal:omit-tag="">Location:</span> 
            <span class="normaltext"
                           tal:content="context/getLocation" />
         </div>

         <!-- Date and Time -->
         <tal:block tal:condition="daterequired">
            <div tal:define="startdate python:context.toLocalizedTime(context.startdate);
                            enddate python:context.toLocalizedTime(context.enddate);
                            starttime python:context.startdate.TimeMinutes();
                            endtime python:context.enddate.TimeMinutes();
                            noStartTime python:test(starttime == '00:00', 0, 1);
                            noEndTime python:test(endtime == '00:00', 0, 1);"
                tal:omit-tag="">
                <span class="hearingsubheader2"
                    i18n:translate="Date:">Date:</span>
    
                <tal:block tal:condition="python:startdate == enddate">
                    <span tal:replace="startdate" />
                    <br />
                    <tal:block tal:condition="python: noStartTime and noEndTime">
                        <span class="hearingsubheader2"
                            i18n:translate="Time">
                            Time:
                        </span>
                        <span tal:replace="starttime" />
                        <span i18n:translate="till"
                            tal:omit-tag="">till</span>
                        <span tal:replace="endtime" />
                        <span i18n:translate="hour">hour</span>
                    </tal:block>
                </tal:block>
                <tal:block tal:condition="python:startdate != enddate">
                    <span i18n:translate="from"
                        tal:omit-tag="">from</span> 
                    <span tal:replace="startdate" />
                    
                    <span i18n:translate="up_untill"
                        tal:omit-tag="">up untill</span> 
                    <span tal:replace="enddate" />

                    <tal:block tal:condition="python: noStartTime and noEndTime">
                        <br />
                        <span class="hearingsubheader2"
                            i18n:translate="Time">
                            Time:
                        </span>
                        <span tal:replace="starttime" />
                        
                        <span i18n:translate="till"
                            tal:omit-tag="">till</span>
                        <span tal:replace="endtime" />
                        <span i18n:translate="hour">hour</span>
                    </tal:block>
                </tal:block>
            </div>
            <br />
            <br />
        </tal:block>
        <!-- end Date and Time -->
        
        <!-- Contactperson -->
       <tal:block tal:define="contacts python:context.getContact()"
                 tal:condition="contacts">
            <br />
            <div i18n:translate="moreinfo_contactperson">
                For more information contact:
            </div>
            <tal:block tal:repeat="contact contacts">
                <div metal:use-macro="context/contactperson_view/macros/contactdetails"
                     tal:omit-tag="" />
            </tal:block>
            <br />
            <br />
        </tal:block>
        
        <!-- end contactpersoon -->
        
        <!-- Text -->
        <div class="bodytext"
             tal:content="structure context/getBody" />
        <!-- End text -->
        <br />
        <!-- Speakers -->
        <div class="hearingsubheader2">Agendapunten</div>
        <ul class="AgendaItems">
            <li tal:repeat="agendaItem agendaItems">
            <tal:block tal:define="obj python:agendaItem.getObject()">
                <span tal:content="agendaItem/Title" />
                <br />
                <span class="hearingsubheader2" 
                      tal:content="obj/speaker" />,
                <span tal:content="obj/organisation" />
                <br />
                <span tal:condition="python:obj.getAttachment().get_size() &gt; 0">

                    <a tal:attributes="href string:${obj/absolute_url}/attachment/at_download"
                       class="attachment"
                       tal:content="obj/attachment/filename"> 
                        Attachment
                    </a>
            
                    <span class="filesize" 
                          tal:define="size python:obj.getObjSize(obj);"
                          tal:condition="size" 
                          tal:content="size">
                        257 KB
                    </span>
                </span>
            </tal:block>
            </li>
        </ul>
        <!-- End speakers -->

    </metal:block>
    </body>
</html>
